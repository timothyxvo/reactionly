<!DOCTYPE HTML>
<html>
	<head>
		<title>Reactionly Recorder</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrollgress.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-wide.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body>

    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=844547028921055&version=v2.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

		<!-- Header -->
			<header id="header" class="skel-layers-fixed">
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="start.html">Start</a></li>
					</ul>
				</nav>
			</header>

		<!-- Main -->
			<section id="main" class="container">
			<center><h2>Reactionly</h2>
			<div id="reaction"></div>
			<div id="player"></div>
            <div id="widget"></div>
            <div id="share" class="hide">
            	<h3>
            	Click to share your video!
            	</h3>
            	<a href="javascript:shareFB()"><img height="35px" width="35px" src="/images/icons/facebook.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/tumblr.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/google-plus.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/twitter.png"></a>
            	<a href="javascript:youtubeOpen()"><img height="35px" width="35px" src="/images/icons/youtube.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/email.png"></a>
            </div>

			<script>
			      // 2. Asynchronously load the Upload Widget and Player API code.
			      var tag = document.createElement('script');
			      tag.src = "https://www.youtube.com/iframe_api";
			      var firstScriptTag = document.getElementsByTagName('script')[0];
			      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

			      // 3. Define global variables for the widget and the player.
			      // The function loads the widget after the JavaScript code has
			      // downloaded and defines event handlers for callback notifications
			      // related to the widget.
			      var widget;
			      var player;
			      var videoID;
			      function onYouTubeIframeAPIReady() {
			        widget = new YT.UploadWidget('widget', {
                      width: 640,
                      height: 390,
			          events: {
			            'onProcessingComplete': onProcessingComplete,
			            'onApiReady': onApiReady,
                        'onStateChange': onStateChange,
                        'onVideoIdAvailable': onVideoIdAvailable,
                        'onUploadSuccess': onUploadSuccess
			          }
			        });
			      }

			      // 4. This function is called when a video has been successfully uploaded.
			      function onProcessingComplete(event) {
			      	player = new YT.Player('reaction', {
                            height: 390,
                            width: 640,
                            videoId: videoID,
                            playerVars: {
                                autoplay: 1,
                                loop: 1,
                                playlist: videoID
                            },
                            events: {}
                    });
			      }

                  function shareFB() {
                    FB.ui({
                      method: 'share',
                      href: 'https://www.youtube.com/watch?v=' + videoID,
                    }, function(response){});
                  }

			      function youtubeOpen() {
			      	window.open("https://www.youtube.com/watch?v=" + videoID, "_blank");
			      }

			      function onUploadSuccess(event) {
			      	// Remove Recorder widget and Youtube player from view
			      	$("#widget").addClass("hide");
			      	$("#player").remove();
			      	// Un-hide our social media share icons
			      	$("#share").removeClass("hide");
			      	$("#reaction").html("<h3>Your video will display here when finished processing.<br><img src='http://loadinggif.com/images/image-selection/32.gif'></h3>");
			      }

			      function onVideoIdAvailable(event) {
			      	// Capture the video ID and save it into our global var
			      	videoID = event.data.videoId;
			      	widget.setVideoTitle("Reactionly - Record Your Reaction!");
			      	widget.setVideoDescription("Record your reaction at reactionly.redirectme.net -- Reactionly - Record Your Reaction!");
			      	widget.setVideoKeywords("reactionly");
			      }

                  function onStateChange(event) {
                    if (event.data.state == YT.UploadWidgetState.RECORDING) {
                        player = new YT.Player('player', {
                            height: 390,
                            width: 640,
                            videoId: "HZa1iFO0Juk",
                            playerVars: {
                                autoplay: 1
                            },
                            events: {}
                        });
                    }
                    else if (event.data.state == YT.UploadWidgetState.PENDING) {
                        player.stopVideo();
                    }
                  }

			      function onApiReady(event) {
			      	widget.setVideoTitle("Reactionly - Record Your Reaction!");
			      	widget.setVideoDescription("Record your reaction at reactionly.redirectme.net -- Reactionly - Record Your Reaction!");
			      	widget.setVideoKeywords("reactionly");
			      }
			    </script></center>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
					<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
					<li><a href="#" class="icon fa-google-plus"><span class="label">Google+</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; Reactionly. All rights reserved.</li>
				</ul>
			</footer>

	</body>
</html>
