<!DOCTYPE HTML>
<html>
	<head>
		<title>Reactionly - Recorder</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrollgress.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-wide.css" />
			<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body>

    <!-- Facebook SDK -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=844547028921055&version=v2.0";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

		<!-- Header -->
			<header id="header" class="skel-layers-fixed">
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
                        <li><a href="start.html">Start</a></li>
                        <li><a href="reactions.html">Reactions</a></li>
					</ul>
				</nav>
			</header>

		<!-- Main -->
			<section id="main" class="container">
			<center><h2>Reactionly</h2>
			<div id="reaction"></div>
			<div id="player"></div>
            <div id="widget"></div>
            <div id="share" class="hide">
            	<h3>
            	Click to share your video!
            	</h3>

				<a id="google" style="color:gray" class="fa fa-google-plus-square fa-4x animated-hover"></a>

				<a id="facebook" style="color:gray" class="fa fa-facebook-square fa-4x animated-hover" href="#"></a>

				<a id="tumblr" style="color:gray" class="fa fa-tumblr-square fa-4x animated-hover" href="#"></a>

				<a id="twitter" style="color:gray" class="fa fa-twitter-square fa-4x animated-hover"></a>
				<a style="color:gray" class="fa fa-youtube-square fa-4x animated-hover" href="javascript:youtubeOpen()"></a>

				<a style="color:gray" id="pinterest" class="fa fa-pinterest-square fa-4x animated-hover"></a>

				<a style="color:gray" id="reddit" class="fa fa-reddit-square fa-4x animated-hover"></a>


            	<!-- <a href="javascript:shareFB()"><img height="35px" width="35px" src="/images/icons/facebook.png"></a>
            	<a href="javascript:shareTumblr()"><img height="35px" width="35px" src="/images/icons/tumblr.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/google-plus.png"></a>
            	<a href="https://twitter.com/intent/tweet?button_hashtag=reactionly&text=Check%20out%20my%20reaction!" class="twitter-hashtag-button" data-size="large" data-url="https://www.youtube.com/watch?v">Tweet #reactionly</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

            	<a href="#"><img height="35px" width="35px" src="/images/icons/twitter.png"></a>
            	<a href="javascript:youtubeOpen()"><img height="35px" width="35px" src="/images/icons/youtube.png"></a>
            	<a href="#"><img height="35px" width="35px" src="/images/icons/email.png"></a>
 -->

            </div>

			<script>
			      // 2. Asynchronously load the Upload Widget and Player API code.
			      var tag = document.createElement('script');
			      tag.src = "https://www.youtube.com/iframe_api";
			      var firstScriptTag = document.getElementsByTagName('script')[0];
			      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

			      // 3. Define global variables for the widget and the player.
			      // The function loads the widget after the JavaScript code has
			      // downloaded and defines event handlers for callback notifications
			      // related to the widget.
			      var widget;
			      var player;
			      var videoID;
                  var tumblr_video_embed_code = "";
                  var tumblr_video_caption = "";
			      function onYouTubeIframeAPIReady() {
			        widget = new YT.UploadWidget('widget', {
                      width: 640,
                      height: 390,
			          events: {
			            'onProcessingComplete': onProcessingComplete,
			            'onApiReady': onApiReady,
                        'onStateChange': onStateChange,
                        'onVideoIdAvailable': onVideoIdAvailable,
                        'onUploadSuccess': onUploadSuccess
			          }
			        });
			      }

			      function getVideoID() {
			      	return videoID;
			      }

			      // 4. This function is called when a video has been successfully uploaded.
			      function onProcessingComplete(event) {
			      	player = new YT.Player('reaction', {
                            height: 390,
                            width: 640,
                            videoId: videoID,
                            playerVars: {
                                autoplay: 1,
                                loop: 1,
                                playlist: videoID
                            },
                            events: {}
                    });
			      }

                  function shareFB() {
                    FB.ui({
                      method: 'share',
                      href: 'https://www.youtube.com/watch?v=' + videoID,
                    }, function(response){});
                  }

                  function share() {
                    var url = "https://www.youtube.com/watch?v=" + videoID;
                  	$("#twitter").attr("href", "https://twitter.com/intent/tweet?text=Reactionly&url=" + url);
                  	$("#pinterest").attr("href", "https://pinterest.com/pin/create/button/?url=" + url + "&description=Reactionly&media=YOUR-IMAGE-SRC");
                  	$("#reddit").attr("href", "http://www.reddit.com/submit?url=" + url + "&title=Reactionly");
                  }

			      function youtubeOpen() {
			      	window.open("https://www.youtube.com/watch?v=" + videoID, "_blank");
			      }

			      function onUploadSuccess(event) {
                    var url = "https://www.youtube.com/watch?v=" + videoID;
                    var tumblr_video_embed_code = url;
                    var tumblr_video_caption = "Record your reaction at reactionly.redirectme.net -- Reactionly - Record Your Reaction!";

			      	// Remove Recorder widget and Youtube player from view
			      	$("#widget").addClass("hide");
			      	$("#player").remove();
			      	// Un-hide our social media share icons
			      	$("#share").removeClass("hide");
                    $("#google").attr("href", "https://plus.google.com/share?url=" + url);
                    $("#google").attr("onclick", "javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;");
                    $("#facebook").attr("onclick", "shareFB()");
                    $("#tumblr").attr("href", "http://www.tumblr.com/share/video?embed=" + encodeURIComponent(tumblr_video_embed_code) + "&caption=" + encodeURIComponent(tumblr_video_caption));
                    $("#tumblr").attr("title", "Share on Tumblr");
                    $("#tumblr").attr("onclick", "window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;");
			      	$("#reaction").html("<h3>Your video will display here when finished processing.<br><i class='fa fa-spinner fa-pulse fa-4x'></i></h3>");
			      }

			      function onVideoIdAvailable(event) {
			      	// Capture the video ID and save it into our global var
			      	videoID = event.data.videoId;
			      	widget.setVideoTitle("Reactionly - Record Your Reaction!");
			      	widget.setVideoDescription("Record your reaction at reactionly.redirectme.net -- Reactionly - Record Your Reaction!");
			      	widget.setVideoKeywords("reactionly");
			      	share();
			      }

                  function onStateChange(event) {
                    if (event.data.state == YT.UploadWidgetState.RECORDING) {
                        player = new YT.Player('player', {
                            height: 390,
                            width: 640,
                            videoId: "HZa1iFO0Juk",
                            playerVars: {
                                autoplay: 1
                            },
                            events: {}
                        });
                    }
                    else if (event.data.state == YT.UploadWidgetState.PENDING) {
                        player.stopVideo();
                    }
                  }

			      function onApiReady(event) {
			      	widget.setVideoTitle("Reactionly - Record Your Reaction!");
			      	widget.setVideoDescription("Record your reaction at reactionly.redirectme.net -- Reactionly - Record Your Reaction!");
			      	widget.setVideoKeywords("reactionly");
			      }
			    </script></center>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
					<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
					<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
					<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
					<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
					<li><a href="#" class="icon fa-google-plus"><span class="label">Google+</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; Reactionly. All rights reserved.</li>
				</ul>
			</footer>


            <script src="http://platform.tumblr.com/v1/share.js"></script>
	</body>
</html>
